# Qwen 80B 모델을 위한 2GPU 환경 설정
# 사용 방법: docker-compose --env-file config/env_2gpu_qwen80b.txt up -d

# CPU 스레드 설정
OMP_NUM_THREADS=32
MKL_NUM_THREADS=32
OMP_PROC_BIND=true
OMP_PLACES=cores

# vLLM 설정
VLLM_SLEEP_WHEN_IDLE=1
VLLM_TUNE_FUSED_MOE=1

# GPU 설정
CUDA_VISIBLE_DEVICES=0,1

# NCCL 설정
NCCL_DEBUG=WARN
NCCL_P2P_DISABLE=0
NCCL_IB_DISABLE=1

# 모델 설정
MODEL_NAME=Qwen/Qwen3-Coder-Next-FP8
TENSOR_PARALLEL_SIZE=2
GPU_MEMORY_UTILIZATION=0.92
MAX_NUM_SEQS=32
MAX_NUM_BATCHED_TOKENS=65535
MAX_MODEL_LEN=262144

# 포트 설정
VLLM_PORT=8000

# CPU 코어 할당 (taskset)
TASKSET_CPUS=0-63